CREATE TABLE STUDENT (
    N_Number CHAR(9) NOT NULL PRIMARY KEY,
    First_Name VARCHAR(20),
    Middle_Initial VARCHAR(3),
    Last_Name VARCHAR(20) NOT NULL,
    Ssn VARCHAR(9) NOT NULL UNIQUE,
    DoB VARCHAR(10),
    Degree_Program VARCHAR(20),
    Student_Class VARCHAR(10),
    Sex VARCHAR(2),
    Perm_Street_Name VARCHAR(30),
    Perm_City VARCHAR(20),
    Perm_State VARCHAR(15),
    Perm_Zip_Code NUMBER,
    Perm_Phone VARCHAR(10),
    Curr_Phone VARCHAR(10),
    Curr_Street_Name VARCHAR(20),
    Curr_City VARCHAR(15),
    Curr_State VARCHAR(15),
    Curr_Zip_Code NUMBER);

CREATE TABLE INSTRUCTOR
(Instructor_num CHAR(9) NOT NULL,
Fname VARCHAR(15) NOT NULL,
Lname VARCHAR(15) NOT NULL,
Ssn CHAR(9) NOT NULL,
Office_num VARCHAR(4),
Address VARCHAR(30),
Age INT,
Phone_num CHAR(10),
Dept_code VARCHAR(20) NOT NULL,
PRIMARY KEY(Instructor_num),
UNIQUE(SSN));

CREATE TABLE DEPARTMENT(
Dept_code VARCHAR(4) NOT NULL,
Dept_name VARCHAR(25) NOT NULL,
Dept_officenumber CHAR(4),
dept_phonenumber char(10),
Dept_college VARCHAR(20),
PRIMARY KEY(Dept_code),
UNIQUE(Dept_name));

CREATE TABLE COURSE
(
COURSE_NUMBER CHAR(7) NOT NULL,
COURSE_NAME VARCHAR(20),
COURSE_DESCRIPTION VARCHAR(50),
COURSE_LEVEL VARCHAR(4),
HOURS INT,
DEPT_CODE VARCHAR(4),
PRIMARY KEY(COURSE_NUMBER),
FOREIGN KEY(DEPT_CODE) REFERENCES DEPARTMENT(DEPT_CODE) ON DELETE CASCADE);

CREATE TABLE SECTION(
Section_Num VARCHAR(5) NOT NULL,
Section_year CHAR(4) NOT NULL,
Section_semester VARCHAR(10) NOT NULL,
Section_coursenumber CHAR(7) NOT NULL,
PRIMARY KEY(Section_Num, Section_year,Section_semester,Section_coursenumber),
FOREIGN KEY(Section_coursenumber) REFERENCES COURSE(Course_Number));

CREATE TABLE TEACHES
(
T_INSTRUCTOR_NUM CHAR(9) NOT NULL,
T_COURSE_NUM CHAR(7) NOT NULL,
T_SECTION_NUM VARCHAR(5) NOT NULL,
T_SECTION_YEAR CHAR(4) NOT NULL,
T_SEMESTER VARCHAR(10) NOT NULL,
PRIMARY KEY(T_INSTRUCTOR_NUM, T_COURSE_NUM, T_SECTION_NUM, T_SECTION_YEAR, T_SEMESTER),
FOREIGN KEY(T_INSTRUCTOR_NUM) REFERENCES INSTRUCTOR(Instructor_num),
FOREIGN KEY(T_COURSE_NUM, T_SECTION_NUM, T_SECTION_YEAR, T_SEMESTER) REFERENCES SECTION(SECTION_COURSENUMBER, SECTION_NUM, SECTION_YEAR, SECTION_SEMESTER));


CREATE TABLE ENROLL(
N_Number CHAR(9) NOT NULL,
E_Section_Number VARCHAR(5) NOT NULL,
E_Section_Year CHAR(4) NOT NULL,
E_Section_Semester VARCHAR(10) NOT NULL,
Course_Number CHAR(7) NOT NULL,
Grade CHAR(2),
PRIMARY KEY (N_Number),
FOREIGN KEY(N_Number) REFERENCES STUDENT(N_Number),
FOREIGN KEY(E_Section_Number, E_Section_Year, E_Section_Semester, Course_Number) REFERENCES SECTION(Section_Num, Section_year, Section_Semester, Section_Coursenumber));

ALTER TABLE INSTRUCTOR ADD FOREIGN KEY(DEPT_CODE) REFERENCES DEPARTMENT(DEPT_CODE);
